!function(t,n,i){var o,e="incom_wrapper",a="#"+e,c="html",u="comments-and-form",r="#"+u,s="data-incom",f=s+"-comment",l="incom-active",d="."+l,v="incom-position-",p="incom-bubble",b="."+p,m=p+"-style",h=p+"-static",w="."+h,g=p+"-dynamic",y=p+"-active",S=p+"-link",k="incom-comments-wrapper",C="."+k,T="incom-cancel",A="."+T,x="incom-info-icon",O="."+x,I=r+" .comment",W="data_incom",B=0,D=n(window).width(),N,_,j;t.init=function(t){Q(t),q(),bn()};var Q=function(t){o=n.extend({selectors:"p",moveSiteSelector:c,countStatic:!0,alwaysStatic:!1,defaultBubbleText:"+",bubbleStyle:"bubble",bubbleAnimationIn:"default",bubbleAnimationOut:"default",position:"left",background:"white"},t)},q=function(){0===n(a).length&&n('<div id="'+e+'"></div>').appendTo(n(c)).addClass(v+o.position),z()},z=function(){var t=mn(o.selectors);n(t).each(function(i){n(t[i]).each(function(t){var i=n(this);E(t,i),F(i)})})},E=function(t,n){var i=n.prop("tagName").substr(0,1);if(!n.attr(s)){var o=i+t;n.attr(s,o)}},F=function(t){var i=G(t),o=J(t),e=n("<a/>",{href:"","class":S}).text(i).wrap(o).parent().appendTo(a);M(e),tn(t,e),on(e)?(P(t,e),R(t,e)):e.hide()},G=function(t){var n;return n=L(t)?H(t):o.defaultBubbleText},H=function(t){var i=t.attr(s),o="["+f+"="+i+"]",e=n(o).length;return e},J=function(t){var n='<div class="'+K(t)+'" />';return n},K=function(t){var n=p,i=" ";return(o.alwaysStatic||L(t)&&o.countStatic)&&(n+=i+h),n+=L(t)||!L(t)&&"bubble"===o.bubbleStyle?i+m:i+g},L=function(t){var i=H(t);return n.isNumeric(i)&&i>0?!0:!1},M=function(t){t.hasClass(h)&&t.css("display","block")},P=function(t,i){i.hasClass(h)||t.add(i).hover(function(){n(b+":not("+w+")").hide(),"fadein"===o.bubbleAnimationIn?i.stop(!0,!0).fadeIn():i.stop(!0,!0).show(),on(i)||i.hide()},function(){"fadeout"===o.bubbleAnimationOut?i.stop(!0,!0).fadeOut():i.stop(!0,!0).delay(700).hide(0)})},R=function(t,n){n.on("click",function(i){i.preventDefault(),U(),t.addClass(l),sn(),n.addClass(y),V(n)})},U=function(){var t=n(d);0!==t.length&&(t.removeClass(l),0===t.prop("class").length&&t.removeAttr("class"))},V=function(t){var i=n("<div/>",{"class":k}).appendTo(a).css("background-color",o.background);Z(),X(),tn(t,i),en(i),un(),rn()},X=function(){n(r).appendTo(C).show(),Y()},Y=function(){var t=n("<input>").attr("type","hidden").attr("name",W).val($);n(r+" .form-submit").append(n(t))},Z=function(){var t="["+f+"="+$()+"]";n(I).hide(),n(I+t).show()},$=function(){var t=n(d).attr(s);return t},tn=function(t,n){var i=t.offset();n.css({top:i.top,left:pn()?i.left+t.outerWidth():i.left-n.outerWidth()})},nn=function(t){N=t.outerWidth(),_=t.offset().left,j=_+N},on=function(t){return nn(t),j>D||0>_?!1:!0},en=function(t){nn(t),pn()&&j>D?(an(j-D),fn("in")):!pn()&&0>_&&(an(-_),fn("in"))},an=function(t){B=t},cn=function(){return B},un=function(){n("html").click(function(t){0===n(t.target).parents(a).length&&sn(!0)})},rn=function(){n(A).click(function(t){t.preventDefault(),sn(!0)})},sn=function(t){var i=n(b),o=n(C);n(r).appendTo(a).hide(),i.hasClass(y)&&(i.removeClass(y),t?o.fadeOut("fast",function(){n(this).remove(),U()}):o.remove(),fn("out"))},fn=function(t){var i=n(o.moveSiteSelector);i.css({position:"relative"}),ln(i,t),o.moveSiteSelector!==c&&(vn(t,b),vn(t,C))},ln=function(t,n){var i;"in"===n?i=cn():"out"===n&&(i="initial"),dn(t,i)},dn=function(t,n){t.css(pn()?{right:n}:{left:n})},vn=function(t,i){var o=n(i);"in"===t?o.css({left:pn()?"-="+cn():"+="+cn()}):"out"===t&&o.css({left:pn()?"+="+cn():"-="+cn()})},pn=function(){return"right"===o.position?!0:!1},bn=function(){n(O).css({display:"block",visibility:"visible"})},mn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);