!function(t,n,i){var o,e="incom_wrapper",a="#"+e,c="html",u="comments-and-form",r="#"+u,s="data-incom",l=s+"-comment",f="incom-active",d="."+f,v="incom-visible-comment",m="."+v,p="incom-position-",b="incom-bubble",h="."+b,w=b+"-style",g=b+"-static",y="."+g,S=b+"-dynamic",C=b+"-active",k=b+"-link",T="incom-comments-wrapper",A="."+T,x="incom-cancel",O="."+x,I="incom-info-icon",W="."+I,B=r+" .comment",D="data_incom",N=0,_=n(window).width(),j,Q,q;t.init=function(t){z(t),E(),hn()};var z=function(t){o=n.extend({selectors:"p",moveSiteSelector:c,countStatic:!0,alwaysStatic:!1,defaultBubbleText:"+",bubbleStyle:"bubble",bubbleAnimationIn:"default",bubbleAnimationOut:"default",position:"left",background:"white"},t)},E=function(){0===n(a).length&&n('<div id="'+e+'"></div>').appendTo(n(c)).addClass(p+o.position),F()},F=function(){var t=wn(o.selectors);n(t).each(function(i){n(t[i]).each(function(t){var i=n(this);G(t,i),H(i)})})},G=function(t,n){var i=n.prop("tagName").substr(0,1);if(!n.attr(s)){var o=i+t;n.attr(s,o)}},H=function(t){var i=J(t),o=L(t),e=n("<a/>",{href:"","class":k}).text(i).wrap(o).parent().appendTo(a);R(e),on(t,e),an(e)?(U(t,e),V(t,e)):e.hide()},J=function(t){var n;return n=P(t)?K(t):o.defaultBubbleText},K=function(t){var i=t.attr(s),o="["+l+"="+i+"]",e=n(o).length;return e},L=function(t){var n='<div class="'+M(t)+'" />';return n},M=function(t){var n=b,i=" ";return(o.alwaysStatic||P(t)&&o.countStatic)&&(n+=i+g),n+=P(t)||!P(t)&&"bubble"===o.bubbleStyle?i+w:i+S},P=function(t){var i=K(t);return n.isNumeric(i)&&i>0?!0:!1},R=function(t){t.hasClass(g)&&t.css("display","block")},U=function(t,i){i.hasClass(g)||t.add(i).hover(function(){n(h+":not("+y+")").hide(),"fadein"===o.bubbleAnimationIn?i.stop(!0,!0).fadeIn():i.stop(!0,!0).show(),an(i)||i.hide()},function(){"fadeout"===o.bubbleAnimationOut?i.stop(!0,!0).fadeOut():i.stop(!0,!0).delay(700).hide(0)})},V=function(t,n){n.on("click",function(i){i.preventDefault(),X(),t.addClass(f),fn(),n.addClass(C),Y(n)})},X=function(){var t=n(d);0!==t.length&&(t.removeClass(f),0===t.prop("class").length&&t.removeAttr("class"))},Y=function(t){var i=n("<div/>",{"class":T}).appendTo(a).css("background-color",o.background);tn(),Z(),on(t,i),cn(i),sn(),ln()},Z=function(){n(r).appendTo(A).show(),$()},$=function(){var t=n("<input>").attr("type","hidden").attr("name",D).val(nn);n(r+" .form-submit").append(n(t))},tn=function(){var t="["+l+"="+nn()+"]";n(B).hide(),n(B+t).addClass(v).show()},nn=function(){var t=n(d).attr(s);return t},on=function(t,n){var i=t.offset();n.css({top:i.top,left:bn()?i.left+t.outerWidth():i.left-n.outerWidth()})},en=function(t){j=t.outerWidth(),Q=t.offset().left,q=Q+j},an=function(t){return en(t),q>_||0>Q?!1:!0},cn=function(t){en(t),bn()&&q>_?(un(q-_),dn("in")):!bn()&&0>Q&&(un(-Q),dn("in"))},un=function(t){N=t},rn=function(){return N},sn=function(){n("html").click(function(t){0===n(t.target).parents(a).length&&fn(!0)})},ln=function(){n(O).click(function(t){t.preventDefault(),fn(!0)})},fn=function(t){var i=n(h),o=n(A);n(r).appendTo(a).hide(),n(m).removeClass(v),i.hasClass(C)&&(i.removeClass(C),t?o.fadeOut("fast",function(){n(this).remove(),X()}):o.remove(),dn("out"))},dn=function(t){var i=n(o.moveSiteSelector);i.css({position:"relative"}),vn(i,t),o.moveSiteSelector!==c&&(pn(t,h),pn(t,A))},vn=function(t,n){var i;"in"===n?i=rn():"out"===n&&(i="initial"),mn(t,i)},mn=function(t,n){t.css(bn()?{right:n}:{left:n})},pn=function(t,i){var o=n(i);"in"===t?o.css({left:bn()?"-="+rn():"+="+rn()}):"out"===t&&o.css({left:bn()?"+="+rn():"-="+rn()})},bn=function(){return"right"===o.position?!0:!1},hn=function(){n(W).css({display:"block",visibility:"visible"})},wn=function(t){var n=t.split(",");return n}}(window.incom=window.incom||{},jQuery);